<!--
SPDX-FileCopyrightText: Rafał Dzięgiel

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Clapper &ndash; 0.0: Extractable Enhancers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="clapper-logo.svg"/>
  <meta property="og:image:alt" content="Clapper-0.0"/>
  

  
  <meta property="og:title" content="Clapper: Extractable Enhancers"/>
  <meta property="og:description" content="Reference for Clapper-0.0: Extractable Enhancers"/>
  <meta name="twitter:title" content="Clapper: Extractable Enhancers"/>
  <meta name="twitter:description" content="Reference for Clapper-0.0: Extractable Enhancers"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  <link rel="search" type="application/opensearchdescription+xml" title="Clapper" href="opensearch.xml">
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <a href="index.html"><img src="clapper-logo.svg" class="logo"/></a>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Clapper</a></h3>
        <p>API Version: 0.0</p>
        
        <p>Library Version: 0.9.1</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2025.4</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Extractable Enhancers
    <a href="#title" class="anchor"></a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <h3 id="overview">Overview<a class="md-anchor" href="#overview" title="Permanent link"></a></h3>
<p><a href="iface.Extractable.html"><code>ClapperExtractable</code></a> is an interface to implement enhancers that need to
resolve given <span class="caps">URI</span> into data that <code>GStreamer</code> will be able to play. While not
limited to, main use-case is for media information&nbsp;extraction.</p>
<p>While implementer is free to write whole extraction by hand, he can alternatively
integrate some 3rd party library that does most of this work. In such case, extractable
enhancer is more of a wrapper for integrating said library. This is especially useful
if library that you want to use is written in different programming language than Clapper&nbsp;is.</p>
<p>For the basics about writing enhancers see <a href="clapper-enhancers.html">Clapper Enhancers</a>.</p>
<h3 id="requirements">Requirements<a class="md-anchor" href="#requirements" title="Permanent link"></a></h3>
<p>Additional fields for <code>.plugin</code> info file: <code>X-Schemes</code> and <code>X-Hosts</code>. The former one should
hold the <code>;</code> separated list of supported <span class="caps">URI</span> schemes, while the latter is for&nbsp;hostnames.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>X-Schemes=https;expl
X-Hosts=example.com;other.example.com
</code></pre></div>

<p>With this in place, enhancer will be loaded and used for URIs that match combinations
of one of the schemes and hosts. The special rule is that when using some custom <span class="caps">URI</span>
scheme other than <code>http(s)</code>, <code>X-Hosts</code> can be skipped since such <span class="caps">URI</span> explicitly
says to use this&nbsp;module.</p>
<p>Considering all of the above, this enhancer would try to extract URIs&nbsp;like:</p>
<ul>
<li><code>https://example.com/video_id=ABCD</code></li>
<li><code>expl://video.it?id=ABCD</code></li>
</ul>
<p>It would not act however&nbsp;for:</p>
<ul>
<li><code>https://video.it?id=ABCD</code></li>
<li><code>qwerty://other.example.com/video_id=ABCD</code></li>
</ul>
<p>An enhancer of this type must implement <a href="vfunc.Extractable.extract.html"><code>Clapper.ExtractableInterface.extract</code></a> virtual&nbsp;method.</p>
<h3 id="harvesting-data">Harvesting data<a class="md-anchor" href="#harvesting-data" title="Permanent link"></a></h3>
<p>When <a href="vfunc.Extractable.extract.html"><code>Clapper.ExtractableInterface.extract</code></a> is called, newly made <a href="class.Harvest.html"><code>ClapperHarvest</code></a>
is passed as this function argument. Implementation is responsible for filling it with
data (see <a href="method.Harvest.fill.html"><code>clapper_harvest_fill()</code></a>) that can be played. Such content can be either
a resolved <span class="caps">URI</span> to actual media file or some streaming manifest (like <code>HLS</code> or <code>DASH</code>).</p>
<p>During extract function, implementation might optionally add media tags such as title
(which will be merged with tags of <a href="class.MediaItem.html"><code>ClapperMediaItem</code></a>) and extra <span class="caps">HTTP</span> request
headers if any are required to access this&nbsp;content.</p>
<h3 id="multiple-items-extraction">Multiple items extraction<a class="md-anchor" href="#multiple-items-extraction" title="Permanent link"></a></h3>
<p>It is possible to handle URIs which would normally return more than one media item to play.
Examples being playlists, search queries, related videos,&nbsp;etc.</p>
<p>This can be handled in two ways, depending on set media&nbsp;type:</p>
<ol>
<li><code>text/uri-list</code></li>
<li><code>application/clapper-playlist</code></li>
</ol>
<p>If you use the first option, harvest should be filled with idividual URIs one per line.
Clapper will use its built-in <span class="caps">URI</span> list parser to create a media item for each <span class="caps">URI</span> and
place them in its playback queue. This is equivalent of creating <a href="class.MediaItem.html"><code>ClapperMediaItem</code></a>
for each of these URIs without setting any tags in it&nbsp;initially.</p>
<p>The second option requires for this enhancer to also implement <a href="iface.Playlistable.html"><code>ClapperPlaylistable</code></a>
interface. In this case, you can fill harvest with <span class="caps">ANY</span> kind of data considering that
<a href="vfunc.Playlistable.parse.html"><code>Clapper.PlaylistableInterface.parse</code></a> of your own enhancer will be used with the data you
passed. With this, you can add more info to media items such as extra tags, timeline markers
or subtitle <span class="caps">URI</span>. Useful if your extractor extracts both URIs and tags in one&nbsp;go.</p>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="#overview"><span class="link-text">Overview</span></a></li>
          
        
        <li class="toc-list-item"><a href="#requirements"><span class="link-text">Requirements</span></a></li>
          
        
        <li class="toc-list-item"><a href="#harvesting-data"><span class="link-text">Harvesting data</span></a></li>
          
        
        <li class="toc-list-item"><a href="#multiple-items-extraction"><span class="link-text">Multiple items extraction</span></a></li>
          
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>